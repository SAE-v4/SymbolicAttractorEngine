{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "glyphs.schema.json",
  "title": "GlyphCatalog",
  "type": "object",
  "additionalProperties": false,
  "$defs": {
    "Vec7": {
      "type": "array",
      "minItems": 7,
      "maxItems": 7,
      "items": {
        "type": "number"
      },
      "description": "Vec7 = [Light, Warmth, Heart, Flame, Inhale, Scale, Witness]"
    },
    "BreathPhase": {
      "enum": [
        "inhale",
        "pause",
        "exhale"
      ]
    },
    "ColorKey": {
      "enum": [
        "light",
        "shadow",
        "warmth",
        "coolness",
        "heart",
        "spirit",
        "flame",
        "offering",
        "witness"
      ]
    },
    "GlyphSpec": {
      "type": "object",
      "required": [
        "id",
        "label",
        "kind",
        "colorKey",
        "breathAnim"
      ],
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "label": {
          "type": "string",
          "minLength": 1
        },
        "kind": {
          "enum": [
            "core",
            "gesture",
            "diagram"
          ]
        },
        "svg": {
          "type": "string",
          "pattern": "^#?[A-Za-z0-9._:-]+$"
        },
        "procedural": {
          "enum": [
            "spiral",
            "radar",
            "cross",
            "corona"
          ]
        },
        "vec": {
          "$ref": "#/$defs/Vec7"
        },
        "gestures": {
          "type": "array",
          "items": {
            "enum": [
              "trace-spiral",
              "trace-zigzag",
              "tap-hold",
              "circle-seal"
            ]
          }
        },
        "offerable": {
          "type": "boolean"
        },
        "colorKey": {
          "$ref": "#/$defs/ColorKey"
        },
        "breathAnim": {
          "type": "object",
          "required": [
            "scale",
            "opacity"
          ],
          "properties": {
            "scale": {
              "type": "array",
              "minItems": 2,
              "maxItems": 2,
              "items": {
                "type": "number"
              }
            },
            "opacity": {
              "type": "array",
              "minItems": 2,
              "maxItems": 2,
              "items": {
                "type": "number"
              }
            }
          },
          "additionalProperties": false
        },
        "audio": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false,
      "allOf": [
        {
          "if": {
            "properties": {
              "kind": {
                "const": "diagram"
              }
            }
          },
          "then": {
            "not": {
              "required": [
                "vec"
              ]
            }
          }
        }
      ]
    }
  },
  "patternProperties": {
    "^[a-z0-9-]+$": {
      "$ref": "#/$defs/GlyphSpec"
    }
  }
}